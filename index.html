<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Угадай число</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            background-color: #f0f0f0;
            min-height: 100vh;
            margin: 0;
        }

        .message {
            font-size: 24px;
            text-align: center;
            margin: 30px 0;
            color: #333;
            min-height: 40px;
        }

        .tiles-container {
            display: flex;
            gap: 10px;
            margin: 30px 0;
            perspective: 1000px;
            flex-wrap: wrap;
            justify-content: center;
            max-width: 800px;
        }

        .tile {
            width: 60px;
            height: 80px;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s;
            cursor: pointer;
            margin: 5px;
        }

        .tile.flipped {
            transform: rotateY(180deg);
        }

        .tile-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
        }

        .tile-front {
            background-color: #3498db;
            color: white;
            border: 2px solid #2980b9;
        }

        .tile-back {
            background-color: #e74c3c;
            color: white;
            border: 2px solid #c0392b;
            transform: rotateY(180deg);
        }

        .buttons {
            display: flex;
            gap: 20px;
            margin: 30px 0;
        }

        button {
            padding: 12px 30px;
            font-size: 18px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .yes-btn {
            background-color: #27ae60;
            color: white;
        }

        .yes-btn:hover {
            background-color: #229954;
        }

        .no-btn {
            background-color: #e74c3c;
            color: white;
        }

        .no-btn:hover {
            background-color: #c0392b;
        }

        .start-btn {
            background-color: #3498db;
            color: white;
            padding: 12px 30px;
            font-size: 18px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .start-btn:hover {
            background-color: #2980b9;
        }

        .play-again-btn {
            background-color: #9b59b6;
            color: white;
            padding: 12px 30px;
            font-size: 18px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .play-again-btn:hover {
            background-color: #8e44ad;
        }

        .hidden {
            display: none;
        }

        .question {
            font-size: 20px;
            text-align: center;
            margin: 20px 0;
            color: #555;
        }

        .step-info {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
            color: #333;
        }
    </style>
</head>
<body>
    <div class="message" id="message">Загадай число от 1 до 100 и я отгадаю его за 7 шагов</div>
    
    <button class="start-btn" id="startButton" onclick="startGame()">Загадал</button>

    <div class="step-info hidden" id="stepInfo"></div>

    <div class="tiles-container hidden" id="tilesContainer">
        <!-- Плитки будут добавлены через JavaScript -->
    </div>

    <div class="question hidden" id="question">Ваше число есть на этих карточках?</div>

    <div class="buttons hidden" id="buttons">
        <button class="yes-btn" onclick="answerYes()">Да</button>
        <button class="no-btn" onclick="answerNo()">Нет</button>
    </div>

    <button class="play-again-btn hidden" id="playAgainButton" onclick="resetGame()">Ещё раз</button>

    <script>
        let currentStep = 0;
        let answers = [];
        let stepOrder = []; // Порядок шагов
        const totalSteps = 7;

        // Числа для каждой карточки (основано на двоичной системе)
        const cardNumbers = [
            [1,3,5,7,9,11,13,15,17,19,21,23,25,27,29,31,33,35,37,39,41,43,45,47,49,51,53,55,57,59,61,63,65,67,69,71,73,75,77,79,81,83,85,87,89,91,93,95,97,99], // 1,3,5,7...
            [2,3,6,7,10,11,14,15,18,19,22,23,26,27,30,31,34,35,38,39,42,43,46,47,50,51,54,55,58,59,62,63,66,67,70,71,74,75,78,79,82,83,86,87,90,91,94,95,98,99], // 2,3,6,7...
            [4,5,6,7,12,13,14,15,20,21,22,23,28,29,30,31,36,37,38,39,44,45,46,47,52,53,54,55,60,61,62,63,68,69,70,71,76,77,78,79,84,85,86,87,92,93,94,95], // 4,5,6,7...
            [8,9,10,11,12,13,14,15,24,25,26,27,28,29,30,31,40,41,42,43,44,45,46,47,56,57,58,59,60,61,62,63,72,73,74,75,76,77,78,79,88,89,90,91,92,93,94,95], // 8,9,10,11...
            [16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95], // 16,17,18...
            [32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,96,97,98,99], // 32,33,34...
            [64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99] // 64,65,66...
        ];

        // Функция для создания случайного порядка шагов
        function generateRandomOrder() {
            const order = [0, 1, 2, 3, 4, 5, 6];
            // Перемешиваем массив
            for (let i = order.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [order[i], order[j]] = [order[j], order[i]];
            }
            return order;
        }

        // Создаем плитки для текущей карточки
        function createTilesForCurrentCard() {
            const container = document.getElementById('tilesContainer');
            container.innerHTML = '';
            
            const currentCardIndex = stepOrder[currentStep];
            const currentNumbers = cardNumbers[currentCardIndex];
            
            // Создаем плитки для всех чисел текущей карточки
            currentNumbers.forEach(number => {
                const tile = document.createElement('div');
                tile.className = 'tile';
                tile.innerHTML = `
                    <div class="tile-face tile-front">?</div>
                    <div class="tile-face tile-back">${number}</div>
                `;
                container.appendChild(tile);
            });
        }

        // Анимация переворота всех плиток
        function animateAllTiles() {
            const tiles = document.querySelectorAll('.tile');
            let index = 0;

            function flipNextTile() {
                if (index < tiles.length) {
                    tiles[index].classList.add('flipped');
                    index++;
                    setTimeout(flipNextTile, 100); // Задержка между переворотами
                }
            }

            setTimeout(flipNextTile, 300);
        }

        // Начало игры
        function startGame() {
            document.getElementById('startButton').classList.add('hidden');
            document.getElementById('message').textContent = '';
            document.getElementById('playAgainButton').classList.add('hidden');
            
            // Генерируем случайный порядок шагов
            stepOrder = generateRandomOrder();
            currentStep = 0;
            answers = [];
            
            showCurrentStep();
        }

        // Сброс игры
        function resetGame() {
            // Скрываем все элементы кроме начального сообщения и кнопки "Загадал"
            document.getElementById('stepInfo').classList.add('hidden');
            document.getElementById('tilesContainer').classList.add('hidden');
            document.getElementById('question').classList.add('hidden');
            document.getElementById('buttons').classList.add('hidden');
            document.getElementById('playAgainButton').classList.add('hidden');
            
            // Показываем начальное сообщение и кнопку
            document.getElementById('message').textContent = 'Загадай число от 1 до 100 и я отгадаю его за 7 шагов';
            document.getElementById('startButton').classList.remove('hidden');
        }

        // Показ текущего шага
        function showCurrentStep() {
            const message = document.getElementById('message');
            const question = document.getElementById('question');
            const buttons = document.getElementById('buttons');
            const container = document.getElementById('tilesContainer');
            const stepInfo = document.getElementById('stepInfo');

            if (currentStep < totalSteps) {
                // Показываем текущую карточку
                createTilesForCurrentCard();
                
                container.classList.remove('hidden');
                question.classList.remove('hidden');
                buttons.classList.remove('hidden');
                stepInfo.classList.remove('hidden');
                stepInfo.textContent = `Шаг ${currentStep + 1}`;
                message.textContent = '';
                
                // Анимация переворота всех плиток
                animateAllTiles();
            } else {
                // Игра завершена - показываем результат
                const result = calculateResult();
                message.textContent = `Ваше число: ${result}`;
                container.classList.add('hidden');
                question.classList.add('hidden');
                buttons.classList.add('hidden');
                stepInfo.classList.add('hidden');
                document.getElementById('playAgainButton').classList.remove('hidden');
            }
        }

        // Ответ "Да"
        function answerYes() {
            const currentCardIndex = stepOrder[currentStep];
            answers[currentCardIndex] = true;
            currentStep++;
            showCurrentStep();
        }

        // Ответ "Нет"
        function answerNo() {
            const currentCardIndex = stepOrder[currentStep];
            answers[currentCardIndex] = false;
            currentStep++;
            showCurrentStep();
        }

        // Вычисление результата по двоичной системе
        function calculateResult() {
            let result = 0;
            for (let i = 0; i < answers.length; i++) {
                if (answers[i]) {
                    result += Math.pow(2, i);
                }
            }
            return result;
        }
    </script>
</body>
</html>